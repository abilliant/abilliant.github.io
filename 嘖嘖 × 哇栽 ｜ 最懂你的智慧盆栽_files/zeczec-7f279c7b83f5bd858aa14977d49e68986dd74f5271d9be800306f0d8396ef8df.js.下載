function on(e,t,a,n){document.addEventListener(e,function(e){if(e.target instanceof HTMLDocument)a(e,e.target);else{var n=e.target.closest(t);(e.target.matches(t)||n)&&a(e,n||e.target)}},n)}function q(e,t){return(t||document).querySelector(e)}function each(e,t,a){[].slice.call((a||document).querySelectorAll(e)).forEach(t)}function map(e,t,a){return[].slice.call((a||document).querySelectorAll(e)).map(t)}function element(e,t,a){var n=document.createElement(e);return Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),a&&(n.innerHTML=a),n}function accept(e){e&&e.target.closest(".js-cookie-banner")||localStorage.getItem("cookie-accepted")||(localStorage.setItem("cookie-accepted",1),initTracking())}function acceptAndClose(e){accept(),cookieBanner.remove()}function initTracking(){window.GoogleAnalyticsObject="ga";var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.async=1,e.src="https://www.google-analytics.com/analytics.js",t.parentNode.insertBefore(e,t),ga("create","UA-28377356-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var a,n=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(a=document.createElement("script"),a.id="facebook-jssdk",a.src="https://connect.facebook.net/zh_TW/sdk.js",n.parentNode.insertBefore(a,n))}function toggleRequireNote(){requireNote.hidden=!hasNote.checked,each("input",function(e){hasNote.checked||(e.checked=!1)},requireNote)}function waitForLoad(e,t){var a=new Image;a.src=e,a.onload=function(){t(e)}}function setSrc(e){e.getAttribute("data-img-src")?waitForLoad(e.getAttribute("data-img-src"),function(t){e.src=t,e.removeAttribute("data-img-src")}):(e.classList.add("is-loading"),waitForLoad(e.getAttribute("data-bg-src"),function(t){e.style.backgroundImage="url("+t+")",e.removeAttribute("data-bg-src"),e.classList.remove("is-loading")}))}function deactivateItem(e){e.classList.remove("active");var t=e.querySelector(".js-activatable-trigger");t.setAttribute("aria-expanded",!1)}function toggleStickyVideo(e){button.hidden=e,video.classList.toggle("mw7",e),classes.forEach(function(t){video.classList.toggle(t,!e)}),map.set(videoMarker,!e)}document.addEventListener("click",function(e){var t,a;if(a=e.target,matches.call(a,"a[data-confirm], button[data-confirm], input[data-confirm]")){if(t=a.getAttribute("data-confirm"),!confirm(t))return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1}else;},!1);var CSRF={token:function(){var e=document.querySelector('meta[name="csrf-token"]');return e&&e.getAttribute("content")},param:function(){var e=document.querySelector('meta[name="csrf-param"]');return e&&e.getAttribute("content")}},sameOrigin=function(e){var t,a=document.createElement("a");return a.href=e,t=a.href.split("/",3).join("/"),0===window.location.href.indexOf(t)};window.CSRF=CSRF,document.addEventListener("ajax:before",function(e){var t=CSRF.token(),a=e.detail;t&&a.setRequestHeader("X-CSRF-Token",t)}),document.addEventListener("submit",function(e){var t=CSRF.token(),a=CSRF.param(),n=e.target;if(matches.call(n,"form")){if(matches.call(n,"form[data-remote]"))return!0;if(!n.method||"GET"==n.method.toUpperCase())return!0;if(!sameOrigin(n.action))return!0;if(a&&t&&!n.querySelector("input[name="+a+"]")){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",a),o.setAttribute("value",t),n.appendChild(o)}return!0}}),document.addEventListener("click",function(e){var t,a;3!=e.which&&(a=e.target,("submit"!==a.getAttribute("type")||null===a.form.querySelector(":invalid"))&&matches.call(a,"a[data-disable-with], button[data-disable-with], input[data-disable-with]")&&(t=a.getAttribute("data-disable-with"),a.value?a.value=t:a.innerHTML=t,setTimeout(function(){a.setAttribute("disabled","disabled")},0)))},!1);var VanillaUJS={formHasNoInputs:function(e){for(var t,a,n=0,o=e.elements,r=o.length;r>n;n++)if(t=o[n],a=t.nodeName.toUpperCase(),t.hasAttribute("name")&&!t.disabled&&("RADIO"!=a&&"CHECKBOX"!=a||t.checked))return!1;return!0}};document.addEventListener("submit",function(e){var t=e.target;if(matches.call(t,"form[data-remote]")){var a=t.action,n=(t.method||t.getAttribute("data-method")||"POST").toUpperCase(),o=new FormData(t),r=VanillaUJS.formHasNoInputs(t);if(CSRF.param()&&CSRF.token()?o[CSRF.param()]=CSRF.token():r&&(o=null),!LiteAjax.ajax({url:a,method:n,data:o,target:t}))return!0;e.preventDefault()}});var LiteAjax=function(){var LiteAjax={};return LiteAjax.options={method:"GET",url:window.location.href},LiteAjax.ajax=function(url,options){"object"==typeof url&&(options=url,url=void 0),options=options||{},options.accepts||(options.accepts="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"),url=url||options.url||location.href||"";var data=options.data,target=options.target||document,xhr=new XMLHttpRequest;xhr.addEventListener("load",function(){var responseType=xhr.getResponseHeader("content-type");"text/javascript; charset=utf-8"===responseType&&eval(xhr.response);var event=new CustomEvent("ajax:complete",{detail:xhr,bubbles:!0});target.dispatchEvent(event)}),"function"==typeof options.success&&xhr.addEventListener("load",function(e){xhr.status>=200&&xhr.status<300&&options.success(xhr)}),"function"==typeof options.error&&(xhr.addEventListener("load",function(e){(xhr.status<200||xhr.status>=300)&&options.error(xhr)}),xhr.addEventListener("error",function(e){options.error(xhr)})),xhr.open(options.method||"GET",url),xhr.setRequestHeader("X-Requested-With","XmlHttpRequest"),xhr.setRequestHeader("Accept","*/*;q=0.5, "+options.accepts),options.json&&(xhr.setRequestHeader("Content-type","application/json"),data=JSON.stringify(data));var beforeSend=new CustomEvent("ajax:before",{detail:xhr,bubbles:!0});return target.dispatchEvent(beforeSend),xhr.send(data),xhr},LiteAjax}();document.addEventListener("click",function(e){function t(e){var t,a,n;if("GET"==e.method)return!1;t=document.createElement("form"),t.method="POST",t.action=e.url,t.style.display="none";for(n in e.data)Object.prototype.hasOwnProperty.call(e.data,n)&&(a=document.createElement("input"),a.setAttribute("type","hidden"),a.setAttribute("name",n),a.setAttribute("value",e.data[n]),t.appendChild(a));return"POST"!=e.method&&(a=document.createElement("input"),a.setAttribute("type","hidden"),a.setAttribute("name","_method"),a.setAttribute("value",e.method),t.appendChild(a)),document.body.appendChild(t),t.submit(),!0}function a(e){return LiteAjax.ajax(e),!0}var n,o,r,i,c;if(0===e.button&&(n=e.target,matches.call(n,"a[data-method]"))){if(o=n.getAttribute("href"),r=n.getAttribute("data-method").toUpperCase(),i={},CSRF.param()&&CSRF.token()&&(i[CSRF.param()]=CSRF.token()),c=matches.call(n,"a[data-remote]")?a:t,!c({url:o,method:r,data:i,target:n}))return!0;e.preventDefault()}},!1);var matches=function(e){return e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector}(document.documentElement),CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a};CustomEvent.prototype=window.CustomEvent.prototype,window.CustomEvent=CustomEvent,Element.prototype.remove||(Element.prototype.remove=function(){this.parentElement.removeChild(this)}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,window.fbAsyncInit=function(){FB.init({appId:"171735882933694",cookie:!0,xfbml:!0,version:"v2.12"}),FB.AppEvents.logPageView()};var cookieBanner=q(".js-cookie-banner"),skippedLocales=["zh-tw","zh-cn","en-au","en-ca","ja-jp","zh-hk","en-us","en","ja","zh","en-sg","en-tw","ko-kr","en-hk"];cookieBanner&&skippedLocales.indexOf(navigator.language.toLowerCase())<0?localStorage.getItem("cookie-accepted")?initTracking():(cookieBanner.hidden=!1,on("click",".js-accept-cookies",acceptAndClose),["/cookies","/docs/privacy"].indexOf(location.pathname)<0&&(window.addEventListener("click",accept),window.addEventListener("scroll",accept,{once:!0}))):initTracking(),on("mousedown","body",function(){document.body.classList.add("intent-mouse"),document.body.classList.remove("intent-keyboard")}),on("keydown","body",function(){document.body.classList.add("intent-keyboard"),document.body.classList.remove("intent-mouse")}),on("click","[data-track]",function(e,t){var a=t.getAttribute("data-track").split("#");ga("send","event",a[0],a[1],a[2])}),on("mouseover",".js-auto-scroll",function(e){e.target.mouseover=!0}),on("mouseout",".js-auto-scroll",function(e){e.target.mouseover=!1}),on("focus",".js-auto-select",function(e){e.target.select()}),on("mouseover",".js-auto-select",function(e){e.target.select()}),on("click","[data-copy]",function(e,t){function a(){var e=t.getAttribute("aria-label");t.setAttribute("aria-label","\u8907\u88fd\u6210\u529f\uff01"),setTimeout(function(){t.setAttribute("aria-label",e)},1e3)}var n=q(t.getAttribute("data-copy"));if("clipboard"in window.navigator)return void navigator.clipboard.writeText(n.value).then(a);n.select();var o=document.createRange();o.selectNodeContents(n);var r=window.getSelection();r.removeAllRanges(),r.addRange(o),n.setSelectionRange(0,n.value.length),document.execCommand("copy"),callbback()}),on("change",".js-story-image-input",function(e){var t=new FileReader;t.onload=function(e){q(".js-story-image").style.backgroundImage="url("+e.target.result+")"};var a=e.target.files[0];a?t.readAsDataURL(e.target.files[0]):q(".js-story-image").style.backgroundImage="none"}),on("click",".js-share-backing-to-facebook",function(e){var t=e.target.getAttribute("data-href"),a=e.target.getAttribute("data-ref");FB.ui({method:"share",mobile_iframe:!0,href:t,ref:a},function(e){e?ga("send","event","Facebook share on success succeeded","#{response.post_id}"):ga("send","event","Facebook share on success aborted",q("[data-userid]").getAttribute("data-userid"))})}),on("load",".js-product-main-image",function(e){var t=q(".js-image-loader");t.classList.add("dn"),e.target.classList.remove("o-40")},!0),each(".js-auto-scroll",function(e){setInterval(function(){e.mouseover||(e.scrollLeft=e.scrollLeft+1)},50)}),on("ajax:complete","form#new_comment",function(e,t){q(".js-comments").insertAdjacentHTML("afterbegin",e.detail.response),q("[disabled]",t).disabled=!1,t.reset()}),on("ajax:complete","[data-comment]",function(e){q("#comment-"+e.target.getAttribute("data-comment")).remove()}),on("ajax:complete",".js-storify",function(e){e.target.outerHTML='<i class="material-icons v-mid f6">bookmark_border</i>'}),on("ajax:complete",".js-nested-comment-form",function(e,t){t.insertAdjacentHTML("beforebegin",e.detail.response),q("[disabled]",t).disabled=!1,t.reset()}),on("ajax:complete",".js-bitly-clicks",function(e,t){t.replaceWith(e.detail.response)});var bar=q(".js-admin-bar");bar&&bar.classList.toggle("dn-ns",localStorage.getItem("zeczec-admin")),document.addEventListener("keydown",function(e){"`"===e.key&&bar&&(q(".js-admin-bar").classList.toggle("dn-ns"),q(".js-admin-bar").setAttribute("open","open"),bar.classList.contains("dn-ns")?localStorage.setItem("zeczec-admin",1):localStorage.removeItem("zeczec-admin",1))}),on("click",".js-summary",function(e,t){var a=t.closest(".js-details");a.hasAttribute("open")?a.removeAttribute("open"):a.setAttribute("open","open");var n=a.children[1];n.classList.toggle("dn",!a.hasAttribute("open"))}),on("click",".js-remove-project-fields-row",function(e,t){var a=q(".js-project-fields");t.closest(".js-project-fields-row").remove(),each(".js-project-fields-row",function(e,t){each("input, select, textarea",function(e){e.setAttribute("id",e.id.replace(/\_\d\_/g,"_"+t.toString()+"_")),e.setAttribute("name",e.name.replace(/\_\d\_/g,"_"+t.toString()+"_"))},e)},a)}),each(".js-counter",function(e){if(window.fetch){var t="https://graph.facebook.com/"+e.getAttribute("data-url");fetch(t).then(function(e){return e.json()}).then(function(t){t.share&&(e.innerText=(t.share.share_count/1e3).toFixed(1).toString()+"k")})}else e.remove()}),on("click",".js-expand-project",function(e,t){t.remove(),q(".js-expand-project-content").classList.remove("maxh7")}),on("change",'input[type="file"]',function(e,t){!t.accept.match(/video/)&&t.files[0].size>1e6?t.setCustomValidity("\u5716\u7247\u6a94\u6848\u8acb\u63a7\u5236\u65bc 1mb \u4ee5\u4e0b\u3002\uff08\u9577\u5bec\u6700\u591a 2000px\uff09"):t.setCustomValidity("")});var hasNote=q(".js-has-note"),requireNote=q(".js-require-note");if(hasNote&&requireNote&&(toggleRequireNote(),hasNote.addEventListener("change",toggleRequireNote)),"IntersectionObserver"in window){var lazyImageObserver=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var t=e.target;setSrc(t),lazyImageObserver.unobserve(t)}})},{rootMargin:"0px 0px 2000px 0px"});each("[data-bg-src], [data-img-src]",function(e){lazyImageObserver.observe(e)})}else each("[data-bg-src], [data-img-src]",function(e){setSrc(e)});var startingSoon=q("[data-starting-in]");if(startingSoon)var timeInt=setInterval(function(){var e=new Date,t=new Date;t.setTime(startingSoon.getAttribute("data-starting-in"));var a=Math.floor((t-e)/1e3),n=Math.floor(a/60),o=a-60*n;startingSoon.textContent=n.toString()+" \u5206 "+o.toString()+" \u79d2",0>a&&(clearInterval(timeInt),q(".js-preheating").hidden=!0,q(".js-back-project-now").hidden=!1)},1e3);var newReadTime=q("[data-read-time-value]");if(newReadTime){var newReadTimeMark=newReadTime.getAttribute("data-read-time-mark"),newReadTimeValue=Number(newReadTime.getAttribute("data-read-time-value")),lastReadTime=localStorage.getItem(newReadTimeMark);lastReadTime&&each("[data-created-at]",function(e){Number(lastReadTime)<Number(e.getAttribute("data-created-at"))&&(e.style.borderLeft="1px solid #99ccff")}),localStorage.setItem(newReadTimeMark,newReadTimeValue)}each("[data-linkify-utm]",function(e){var t=e.getAttribute("data-linkify-utm").split("#");each("a",function(e){var a=["utm_source=","utm_campaign=","utm_medium="];e.href+=(e.href.match(/\?/)?"&":"?")+t.map(function(e){return a.shift()+e}).join("&")},e)}),each(".js-flash",function(e){var t=element("button",{type:"button","class":"button-close fr js-close-flash"},"&times;");e.insertBefore(t,e.childNodes[0])}),on("click",".js-close-flash",function(e){e.target.closest(".js-flash").remove()});var activeElement;on("click",".js-activatable-trigger",function(e){var t=e.target.closest(".js-activatable");activeElement&&activeElement!==t&&deactivateItem(activeElement),t.classList.toggle("active"),e.target.setAttribute("aria-expanded",t.classList.contains("active")),activeElement=t}),document.body.addEventListener("click",function(e){activeElement&&!e.target.closest(".js-activatable")&&deactivateItem(activeElement)}),on("click",".js-play-video",function(e){var t=document.querySelector(".js-video");t.src=t.getAttribute("data-url")+"&autoplay=1",e.target.remove()});var videoMarker=q(".js-sticky-video-marker");if(videoMarker&&"IntersectionObserver"in window){var classes=["fixed","mw6","ba","b--light-gray","br2","w-100","transition","ma3","z-4","pa0"],map=new WeakMap,video=q(".js-sticky-video"),button=q(".js-undo-sticky-video");on("click",".js-undo-sticky-video",function(e){videoObserver.unobserve(video),videoObserver.unobserve(videoMarker),toggleStickyVideo(!0)});var videoObserver=new IntersectionObserver(function(e,t){q(".js-play-video")||e.forEach(function(e){if(e.target===video)map.set(video,e.isIntersecting);else{if(map.get(video)&&!video.classList.contains("fixed")||map.get(e.target)===!e.isIntersecting)return;toggleStickyVideo(e.isIntersecting)}})});each(".js-sticky-video-marker, .js-sticky-video",function(e){videoObserver.observe(e)})}each(".js-ec-track",function(e){var t=e.getAttribute("data-id");if(uniq(t)){ga("require","ecommerce");var a={id:t,affiliation:e.getAttribute("data-affiliation"),revenue:e.getAttribute("data-sum"),currency:"TWD"};ga("ecommerce:addTransaction",a),items=JSON.parse(e.getAttribute("data-items")),items.forEach(function(e){ga("ecommerce:addItem",{id:t,sku:e[0],name:e[1],price:e[2],quantity:e[3]})}),ga("ecommerce:send")}});